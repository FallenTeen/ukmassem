import{c as L,j as t}from"./app-P6dEBHuB.js";import{a as R,C as T,b as C,c as P}from"./card-DKx4uLjh.js";import{P as U}from"./progress-CYXrDxWg.js";/* empty css            */import"./index-EKCV0cNf.js";import"./index-DQ55ufzE.js";import"./index-XwOQEk2p.js";const Q={draft:25,aktif:60,selesai:100,dibatalkan:0};function he(a){const e=L.c(53),{proker:s}=a;let r,n,d,o,l,x,h,m,i;if(e[0]!==s.rapats||e[1]!==s.status){const J=s.rapats??[],k=J.map(ae),B=k.filter(te),D=B.length===0?0:Math.round(B.reduce(ee,0)/B.length),G=new Map;k.forEach(V=>{const{rapat:q}=V;(q.presensi_rapats??[]).forEach(c=>{const I=G.get(c.anggota_id)??{hadir:0,total:0,nama:c.anggota?c.anggota.nama_lengkap||c.anggota.user?.name||`Anggota ${c.anggota_id}`:`Anggota ${c.anggota_id}`},z=c.status_kehadiran==="hadir"?1:0,F={...I,hadir:I.hadir+z,total:I.total+1};G.set(c.anggota_id,F)})});const O=Array.from(G.values()).map(Z).sort(Y).slice(0,10),f=Q[s.status]??0;m="space-y-6";let A;e[11]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(C,{children:t.jsx(P,{className:"text-sm",children:"Total Rapat"})}),e[11]=A):A=e[11];const H=t.jsx(R,{children:t.jsx("div",{className:"text-2xl font-semibold",children:J.length})});let j;e[12]!==H?(j=t.jsxs(T,{children:[A,H]}),e[12]=H,e[13]=j):j=e[13];let E;e[14]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx(C,{children:t.jsx(P,{className:"text-sm",children:"Rata-rata Kehadiran"})}),e[14]=E):E=e[14];let K;e[15]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"%"}),e[15]=K):K=e[15];let N;e[16]!==D?(N=t.jsxs(T,{children:[E,t.jsx(R,{children:t.jsxs("div",{className:"text-2xl font-semibold",children:[D,K]})})]}),e[16]=D,e[17]=N):N=e[17];let M;e[18]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(C,{children:t.jsx(P,{className:"text-sm",children:"Progress Proker"})}),e[18]=M):M=e[18];let b;e[19]!==s.status?(b=t.jsxs("span",{children:["Status: ",s.status]}),e[19]=s.status,e[20]=b):b=e[20];let y;e[21]!==f?(y=t.jsxs("span",{children:[f,"%"]}),e[21]=f,e[22]=y):y=e[22];let _;e[23]!==b||e[24]!==y?(_=t.jsxs("div",{className:"mb-2 flex items-center justify-between text-xs text-muted-foreground",children:[b,y]}),e[23]=b,e[24]=y,e[25]=_):_=e[25];let v;e[26]!==f?(v=t.jsx(U,{value:f}),e[26]=f,e[27]=v):v=e[27];let S;e[28]!==_||e[29]!==v?(S=t.jsxs(T,{children:[M,t.jsxs(R,{children:[_,v]})]}),e[28]=_,e[29]=v,e[30]=S):S=e[30],e[31]!==j||e[32]!==N||e[33]!==S?(i=t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[j,N,S]}),e[31]=j,e[32]=N,e[33]=S,e[34]=i):i=e[34],x="grid gap-4 md:grid-cols-2";let $;e[35]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(C,{children:t.jsx(P,{className:"text-sm",children:"Kehadiran per Anggota"})}),e[35]=$):$=e[35],h=t.jsxs(T,{children:[$,t.jsxs(R,{className:"space-y-3 text-xs",children:[O.length===0&&t.jsx("div",{className:"text-muted-foreground",children:"Belum ada data presensi rapat."}),O.map(X)]})]}),n=T,e[36]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsx(C,{children:t.jsx(P,{className:"text-sm",children:"Rapat dan Tingkat Kehadiran"})}),e[36]=l):l=e[36],r=R,d=k.length===0&&t.jsx("div",{className:"text-xs text-muted-foreground",children:"Belum ada rapat yang terhubung dengan proker ini."}),o=k.length>0&&t.jsxs("table",{className:"w-full text-left text-xs",children:[t.jsx("thead",{className:"border-b bg-muted/40 text-[11px] uppercase text-muted-foreground",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-2 py-1",children:"Judul"}),t.jsx("th",{className:"px-2 py-1",children:"Tanggal"}),t.jsx("th",{className:"px-2 py-1 text-right",children:"Kehadiran"})]})}),t.jsx("tbody",{children:k.map(W)})]}),e[0]=s.rapats,e[1]=s.status,e[2]=r,e[3]=n,e[4]=d,e[5]=o,e[6]=l,e[7]=x,e[8]=h,e[9]=m,e[10]=i}else r=e[2],n=e[3],d=e[4],o=e[5],l=e[6],x=e[7],h=e[8],m=e[9],i=e[10];let p;e[37]!==r||e[38]!==d||e[39]!==o?(p=t.jsxs(r,{children:[d,o]}),e[37]=r,e[38]=d,e[39]=o,e[40]=p):p=e[40];let g;e[41]!==n||e[42]!==l||e[43]!==p?(g=t.jsxs(n,{children:[l,p]}),e[41]=n,e[42]=l,e[43]=p,e[44]=g):g=e[44];let u;e[45]!==x||e[46]!==h||e[47]!==g?(u=t.jsxs("div",{className:x,children:[h,g]}),e[45]=x,e[46]=h,e[47]=g,e[48]=u):u=e[48];let w;return e[49]!==u||e[50]!==m||e[51]!==i?(w=t.jsxs("div",{className:m,children:[i,u]}),e[49]=u,e[50]=m,e[51]=i,e[52]=w):w=e[52],w}function W(a){return t.jsxs("tr",{className:"border-b last:border-0",children:[t.jsx("td",{className:"px-2 py-1 align-top",children:t.jsx("div",{className:"max-w-[220px] truncate",children:a.rapat.judul})}),t.jsx("td",{className:"px-2 py-1 align-top text-[11px] text-muted-foreground",children:a.rapat.tanggal}),t.jsxs("td",{className:"px-2 py-1 align-top text-right text-[11px] text-muted-foreground",children:[a.hadir,"/",a.total," hadir (",a.percentage,"%)"]})]},a.rapat.id)}function X(a,e){return t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsx("span",{className:"font-medium",children:a.nama}),t.jsxs("span",{className:"text-muted-foreground",children:[a.hadir,"/",a.total," hadir (",a.percentage,"%)"]})]}),t.jsx(U,{value:a.percentage})]},e)}function Y(a,e){return e.percentage-a.percentage||e.hadir-a.hadir}function Z(a){return{...a,percentage:a.total>0?Math.round(a.hadir/a.total*100):0}}function ee(a,e){return a+e.percentage}function te(a){return a.total>0}function ae(a){const e=a.presensi_rapats??[],s=e.length,r=e.filter(se).length,n=s>0?Math.round(r/s*100):0;return{rapat:a,total:s,hadir:r,percentage:n}}function se(a){return a.status_kehadiran==="hadir"}export{he as default};
