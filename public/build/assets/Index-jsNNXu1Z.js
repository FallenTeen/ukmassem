import{c as ge,r as U,u as je,j as s,L as ke,a as be,H as ye}from"./app-BMaJ277M.js";import{I as ae}from"./input-error-BwbLNOaF.js";import{B as ve}from"./badge-RXohnkv3.js";import{B as l}from"./app-logo-icon-DDDCtqyw.js";import{C as Ne,b as _e,c as Ce,a as Se,d as Me}from"./card-DeuyXrYd.js";import{g as ce,D as De,f as de,c as me,d as pe,e as he,h as ue,A as Pe}from"./app-layout-B40fJwoS.js";import{I as te}from"./input-DVApTORf.js";import{L as ie}from"./label-C8n63Ft7.js";import{T as Te}from"./trash-2-h9-KTH_k.js";import{P as we}from"./plus-6UrHYKu4.js";/* empty css            */import"./index-CwAk2UvS.js";import"./index-CawQK52s.js";import"./index-BvWwRT-b.js";import"./tooltip-BaastClK.js";import"./createLucideIcon-C2ADE_Lv.js";import"./progress-DRqacVrA.js";import"./index-BOrodNbs.js";const Ee=[{title:"Main Proker",href:"/main-proker"}];function Xe(xe){const e=ge.c(78),{mainProkers:i}=xe,[P,le]=U.useState("create"),[V,E]=U.useState(!1),[B,ne]=U.useState(null),[T,w]=U.useState(null);let F;e[0]===Symbol.for("react.memo_cache_sentinel")?(F={nama_proker:"",deskripsi:"",gambar:null},e[0]=F):F=e[0];const{data:n,setData:a,post:W,put:X,processing:H,errors:t,reset:o}=je(F);let L;e[1]!==o?(L=()=>{le("create"),ne(null),o(),E(!0)},e[1]=o,e[2]=L):L=e[2];const Y=L;let $;e[3]!==a?($=r=>{le("edit"),ne(r),a({nama_proker:r.nama_proker,deskripsi:r.deskripsi??"",gambar:null}),E(!0)},e[3]=a,e[4]=$):$=e[4];const Z=$;let I;e[5]!==P||e[6]!==W||e[7]!==X||e[8]!==o||e[9]!==B?(I=r=>{r.preventDefault();const oe={forceFormData:!0,onSuccess:()=>{w({type:"success",message:P==="create"?"Main proker berhasil dibuat.":"Main proker berhasil diperbarui."}),E(!1),o()},onError:()=>{w({type:"error",message:"Terjadi kesalahan saat menyimpan main proker."})}};P==="create"?W("/main-proker",oe):B&&X(`/main-proker/${B.id}`,oe)},e[5]=P,e[6]=W,e[7]=X,e[8]=o,e[9]=B,e[10]=I):I=e[10];const ee=I;let z;e[11]===Symbol.for("react.memo_cache_sentinel")?(z=r=>{be.delete(`/main-proker/${r.id}`,{onSuccess:()=>{w({type:"success",message:"Main proker berhasil dihapus."})},onError:()=>{w({type:"error",message:"Gagal menghapus main proker."})}})},e[11]=z):z=e[11];const fe=z;let A;e[12]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx(ye,{title:"Main Proker"}),e[12]=A):A=e[12];let c;e[13]!==T?(c=T&&s.jsx("div",{className:"fixed right-4 top-4 z-50 max-w-sm",children:s.jsx("div",{className:`rounded-md border px-4 py-3 text-sm shadow-md ${T.type==="success"?"border-green-200 bg-green-50 text-green-800":"border-red-200 bg-red-50 text-red-800"}`,children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsx("span",{children:T.message}),s.jsx("button",{type:"button",className:"text-xs font-semibold",onClick:()=>w(null),children:"Tutup"})]})})}),e[13]=T,e[14]=c):c=e[14];let G;e[15]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsxs("div",{children:[s.jsx("h1",{className:"text-lg font-semibold",children:"Main Proker"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Kelola kelompok besar program kerja ASSEM."})]}),e[15]=G):G=e[15];let K;e[16]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx(we,{className:"mr-2 h-4 w-4"}),e[16]=K):K=e[16];let d;e[17]!==Y?(d=s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[G,s.jsxs(l,{type:"button",onClick:Y,children:[K,"Tambah Main Proker"]})]}),e[17]=Y,e[18]=d):d=e[18];const se=P==="create"?"Buat Main Proker Baru":"Edit Main Proker";let m;e[19]!==se?(m=s.jsx(me,{children:s.jsx(pe,{children:se})}),e[19]=se,e[20]=m):m=e[20];let O;e[21]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(ie,{htmlFor:"nama_proker",children:"Nama Main Proker"}),e[21]=O):O=e[21];let p;e[22]!==a?(p=r=>a("nama_proker",r.target.value),e[22]=a,e[23]=p):p=e[23];let h;e[24]!==n.nama_proker||e[25]!==p?(h=s.jsx(te,{id:"nama_proker",value:n.nama_proker,onChange:p}),e[24]=n.nama_proker,e[25]=p,e[26]=h):h=e[26];let u;e[27]!==t.nama_proker?(u=s.jsx(ae,{message:t.nama_proker}),e[27]=t.nama_proker,e[28]=u):u=e[28];let x;e[29]!==h||e[30]!==u?(x=s.jsxs("div",{className:"space-y-1",children:[O,h,u]}),e[29]=h,e[30]=u,e[31]=x):x=e[31];let R;e[32]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx(ie,{htmlFor:"deskripsi",children:"Deskripsi"}),e[32]=R):R=e[32];let f;e[33]!==a?(f=r=>a("deskripsi",r.target.value),e[33]=a,e[34]=f):f=e[34];let g;e[35]!==n.deskripsi||e[36]!==f?(g=s.jsx(te,{id:"deskripsi",value:n.deskripsi,onChange:f}),e[35]=n.deskripsi,e[36]=f,e[37]=g):g=e[37];let j;e[38]!==t.deskripsi?(j=s.jsx(ae,{message:t.deskripsi}),e[38]=t.deskripsi,e[39]=j):j=e[39];let k;e[40]!==g||e[41]!==j?(k=s.jsxs("div",{className:"space-y-1",children:[R,g,j]}),e[40]=g,e[41]=j,e[42]=k):k=e[42];let J;e[43]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx(ie,{htmlFor:"gambar",children:"Gambar (opsional)"}),e[43]=J):J=e[43];let b;e[44]!==a?(b=s.jsx(te,{id:"gambar",type:"file",accept:"image/*",onChange:r=>a("gambar",r.target.files?.[0]??null)}),e[44]=a,e[45]=b):b=e[45];let y;e[46]!==t.gambar?(y=s.jsx(ae,{message:t.gambar}),e[46]=t.gambar,e[47]=y):y=e[47];let v;e[48]!==b||e[49]!==y?(v=s.jsxs("div",{className:"space-y-1",children:[J,b,y]}),e[48]=b,e[49]=y,e[50]=v):v=e[50];let q;e[51]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx(ue,{asChild:!0,children:s.jsx(l,{type:"button",variant:"secondary",children:"Batal"})}),e[51]=q):q=e[51];const re=H?"Menyimpan...":"Simpan";let N;e[52]!==H||e[53]!==re?(N=s.jsxs(he,{className:"pt-2",children:[q,s.jsx(l,{type:"submit",disabled:H,children:re})]}),e[52]=H,e[53]=re,e[54]=N):N=e[54];let _;e[55]!==ee||e[56]!==x||e[57]!==k||e[58]!==v||e[59]!==N?(_=s.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[x,k,v,N]}),e[55]=ee,e[56]=x,e[57]=k,e[58]=v,e[59]=N,e[60]=_):_=e[60];let C;e[61]!==m||e[62]!==_?(C=s.jsxs(de,{children:[m,_]}),e[61]=m,e[62]=_,e[63]=C):C=e[63];let S;e[64]!==V||e[65]!==C?(S=s.jsx(ce,{open:V,onOpenChange:E,children:C}),e[64]=V,e[65]=C,e[66]=S):S=e[66];let M;e[67]!==i.length?(M=i.length===0&&s.jsx("div",{className:"rounded-lg border bg-muted/40 p-8 text-center text-sm text-muted-foreground",children:'Belum ada main proker. Klik "Tambah Main Proker" untuk mulai menambah.'}),e[67]=i.length,e[68]=M):M=e[68];let D;e[69]!==i||e[70]!==Z?(D=i.length>0&&s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map(r=>s.jsxs(Ne,{children:[s.jsxs(_e,{className:"gap-3",children:[r.gambar&&s.jsx("div",{className:"overflow-hidden rounded-lg border bg-muted/40",children:s.jsx("img",{src:`/storage/${r.gambar}`,alt:r.nama_proker,className:"h-40 w-full object-cover"})}),s.jsx("div",{children:s.jsx(Ce,{className:"text-base",children:r.nama_proker})})]}),s.jsxs(Se,{className:"space-y-3",children:[r.deskripsi&&s.jsx("p",{className:"text-sm text-muted-foreground",children:r.deskripsi}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"Jumlah proker"}),s.jsx(ve,{variant:"outline",children:r.prokers_count})]})]}),s.jsxs(Me,{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(l,{type:"button",size:"sm",variant:"outline",onClick:()=>Z(r),children:"Edit"}),s.jsxs(ce,{children:[s.jsx(De,{asChild:!0,children:s.jsxs(l,{type:"button",size:"sm",variant:"destructive",children:[s.jsx(Te,{className:"mr-1 h-3 w-3"}),"Hapus"]})}),s.jsxs(de,{children:[s.jsx(me,{children:s.jsx(pe,{children:"Hapus Main Proker"})}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Main proker ini dan seluruh prokernya akan dihapus. Tindakan ini tidak dapat dibatalkan."}),s.jsxs(he,{className:"pt-3",children:[s.jsx(ue,{asChild:!0,children:s.jsx(l,{type:"button",variant:"secondary",children:"Batal"})}),s.jsx(l,{type:"button",variant:"destructive",onClick:()=>fe(r),children:"Hapus"})]})]})]})]}),s.jsx(ke,{href:`/proker?tahun=&status=&main_proker_id=${r.id}`,className:"text-xs font-medium text-primary hover:underline",children:"Lihat Proker"})]})]},r.id))}),e[69]=i,e[70]=Z,e[71]=D):D=e[71];let Q;return e[72]!==d||e[73]!==S||e[74]!==M||e[75]!==D||e[76]!==c?(Q=s.jsxs(Pe,{breadcrumbs:Ee,children:[A,s.jsxs("div",{className:"flex flex-col gap-4 p-4",children:[c,d,S,M,D]})]}),e[72]=d,e[73]=S,e[74]=M,e[75]=D,e[76]=c,e[77]=Q):Q=e[77],Q}export{Xe as default};
