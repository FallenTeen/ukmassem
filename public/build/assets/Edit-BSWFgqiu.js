import{c as qe,u as Je,r as K,j as s,a as Qe,H as We}from"./app-BMaJ277M.js";import{I as ke}from"./input-error-BwbLNOaF.js";import{B as q}from"./app-logo-icon-DDDCtqyw.js";import{D as Xe,c as Ye,d as Ze,h as es,e as ss,f as ts,g as as,A as ls}from"./app-layout-B40fJwoS.js";import{I as we}from"./input-DVApTORf.js";import{L as Ne}from"./label-C8n63Ft7.js";import{S as is,a as rs,b as ns,c as os,d as ms}from"./select-D7AfJtrD.js";import{S as Ge}from"./spinner-DK8PGcaS.js";import{E as cs,a as ds}from"./eye-COX7JTQm.js";/* empty css            */import"./index-CwAk2UvS.js";import"./index-CawQK52s.js";import"./index-BvWwRT-b.js";import"./tooltip-BaastClK.js";import"./createLucideIcon-C2ADE_Lv.js";import"./progress-DRqacVrA.js";import"./index-BOrodNbs.js";import"./index-SfzFyyBq.js";import"./check-DW21Srej.js";import"./loader-circle-CQ9FICFv.js";const fs=["rajawebsite","ketum_waketum","sekretaris","bendahara","dm","humas","kad_fot","kad_fil","kad_tar","kad_mus","kad_tea","rt","litbang","pelatih","pembina","po","anggota"];function Ts(o){const e=qe.c(135),{user:r,anggota:n}=o;let Q;e[0]===Symbol.for("react.memo_cache_sentinel")?(Q={title:"Manajemen Akun",href:"/user-account"},e[0]=Q):Q=e[0];const Ee=`/user-account/${r.id}/edit`;let W;e[1]!==Ee?(W=[Q,{title:"Edit Akun",href:Ee}],e[1]=Ee,e[2]=W):W=e[2];const Ce=W,Ae=r.name||"",De=r.email||"",He=r.role||"anggota";let X;e[3]!==Ae||e[4]!==De||e[5]!==He?(X={name:Ae,email:De,password:"",role:He},e[3]=Ae,e[4]=De,e[5]=He,e[6]=X):X=e[6];const{data:a,setData:l,put:Ie,processing:c,errors:Pe}=Je(X);let Y;e[7]===Symbol.for("react.memo_cache_sentinel")?(Y={},e[7]=Y):Y=e[7];const[Ue,Ve]=K.useState(Y),[Z,Ke]=K.useState(!1),[J,ee]=K.useState(null),[Fe,Me]=K.useState(!1),[m,Te]=K.useState(""),[se,ze]=K.useState(!1);let te;e[8]!==a.email||e[9]!==a.password||e[10]!==a.role?(te=()=>{const t={};return a.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(t.email="Format email tidak valid."):t.email="Email wajib diisi.",a.password&&a.password.length<8&&(t.password="Password minimal 8 karakter."),a.role||(t.role="Role wajib dipilih."),Ve(t),Object.keys(t).length===0},e[8]=a.email,e[9]=a.password,e[10]=a.role,e[11]=te):te=e[11];const Oe=te;let ae;e[12]!==Ie||e[13]!==r.id||e[14]!==Oe?(ae=t=>{t.preventDefault(),Oe()&&Ie(`/user-account/${r.id}`,{onSuccess:()=>{ee({type:"success",message:"Akun user berhasil diperbarui."})},onError:()=>{ee({type:"error",message:"Gagal memperbarui akun user."})}})},e[12]=Ie,e[13]=r.id,e[14]=Oe,e[15]=ae):ae=e[15];const Re=ae;let le;e[16]!==m||e[17]!==r.id?(le=()=>{m==="HAPUS"&&(ze(!0),Qe.delete(`/user-account/${r.id}`,{onSuccess:()=>{ee({type:"success",message:"Akun user berhasil dihapus."}),Me(!1)},onError:()=>{ee({type:"error",message:"Gagal menghapus akun user."})},onFinish:()=>{ze(!1),Te("")}}))},e[16]=m,e[17]=r.id,e[18]=le):le=e[18];const $e=le;let ie;e[19]!==Ue||e[20]!==Pe?(ie=t=>Ue[t]||Pe[t],e[19]=Ue,e[20]=Pe,e[21]=ie):ie=e[21];const i=ie;let re;e[22]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx(We,{title:"Edit Akun User"}),e[22]=re):re=e[22];let d;e[23]!==J?(d=J&&s.jsx("div",{className:"mb-4 rounded-md border px-4 py-3 text-sm shadow-sm md:max-w-md",children:s.jsx("div",{className:J.type==="success"?"text-green-800":"text-red-800",children:J.message})}),e[23]=J,e[24]=d):d=e[24];let ne;e[25]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx("h1",{className:"text-lg font-semibold",children:"Edit Akun User"}),e[25]=ne):ne=e[25];let f;e[26]!==n?(f=n&&s.jsxs("div",{className:"grid gap-2 rounded-md bg-muted/60 p-3 text-sm md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Nama Anggota"}),s.jsx("div",{className:"text-muted-foreground",children:n.nama_lengkap||n.user?.name||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"NIM"}),s.jsx("div",{className:"text-muted-foreground",children:n.NIM||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Divisi"}),s.jsx("div",{className:"text-muted-foreground capitalize",children:n.divisi||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Status Anggota"}),s.jsx("div",{className:"text-muted-foreground capitalize",children:n.status_anggota.replace("_"," ")})]})]}),e[26]=n,e[27]=f):f=e[27];let oe;e[28]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(Ne,{htmlFor:"name",children:"Nama User"}),e[28]=oe):oe=e[28];let u;e[29]!==l?(u=t=>l("name",t.target.value),e[29]=l,e[30]=u):u=e[30];let p;e[31]!==a.name||e[32]!==u?(p=s.jsx(we,{id:"name",value:a.name,onChange:u}),e[31]=a.name,e[32]=u,e[33]=p):p=e[33];let h;e[34]!==i?(h=i("name"),e[34]=i,e[35]=h):h=e[35];let x;e[36]!==h?(x=s.jsx(ke,{message:h}),e[36]=h,e[37]=x):x=e[37];let g;e[38]!==p||e[39]!==x?(g=s.jsxs("div",{className:"space-y-1",children:[oe,p,x]}),e[38]=p,e[39]=x,e[40]=g):g=e[40];let me;e[41]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx(Ne,{htmlFor:"email",children:"Email"}),e[41]=me):me=e[41];let j;e[42]!==l?(j=t=>l("email",t.target.value),e[42]=l,e[43]=j):j=e[43];let b;e[44]!==a.email||e[45]!==j?(b=s.jsx(we,{id:"email",type:"email",value:a.email,onChange:j}),e[44]=a.email,e[45]=j,e[46]=b):b=e[46];let _;e[47]!==i?(_=i("email"),e[47]=i,e[48]=_):_=e[48];let y;e[49]!==_?(y=s.jsx(ke,{message:_}),e[49]=_,e[50]=y):y=e[50];let v;e[51]!==b||e[52]!==y?(v=s.jsxs("div",{className:"space-y-1",children:[me,b,y]}),e[51]=b,e[52]=y,e[53]=v):v=e[53];let ce;e[54]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx(Ne,{htmlFor:"password",children:"Password (opsional)"}),e[54]=ce):ce=e[54];const Be=Z?"text":"password";let S;e[55]!==l?(S=t=>l("password",t.target.value),e[55]=l,e[56]=S):S=e[56];let k;e[57]!==a.password||e[58]!==Be||e[59]!==S?(k=s.jsx(we,{id:"password",type:Be,value:a.password,onChange:S,placeholder:"Isi jika ingin mengganti password"}),e[57]=a.password,e[58]=Be,e[59]=S,e[60]=k):k=e[60];let de;e[61]===Symbol.for("react.memo_cache_sentinel")?(de=()=>Ke(hs),e[61]=de):de=e[61];let w;e[62]!==Z?(w=s.jsx(q,{type:"button",variant:"secondary",onClick:de,children:Z?s.jsx(cs,{className:"h-4 w-4"}):s.jsx(ds,{className:"h-4 w-4"})}),e[62]=Z,e[63]=w):w=e[63];let N;e[64]!==k||e[65]!==w?(N=s.jsxs("div",{className:"flex gap-2",children:[k,w]}),e[64]=k,e[65]=w,e[66]=N):N=e[66];let E;e[67]!==i?(E=i("password"),e[67]=i,e[68]=E):E=e[68];let C;e[69]!==E?(C=s.jsx(ke,{message:E}),e[69]=E,e[70]=C):C=e[70];let A;e[71]!==N||e[72]!==C?(A=s.jsxs("div",{className:"space-y-1",children:[ce,N,C]}),e[71]=N,e[72]=C,e[73]=A):A=e[73];let fe;e[74]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(Ne,{children:"Role"}),e[74]=fe):fe=e[74];let D;e[75]!==l?(D=t=>l("role",t),e[75]=l,e[76]=D):D=e[76];let ue;e[77]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(rs,{children:s.jsx(ns,{placeholder:"Pilih role"})}),e[77]=ue):ue=e[77];let pe;e[78]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(os,{children:fs.map(ps)}),e[78]=pe):pe=e[78];let H;e[79]!==a.role||e[80]!==D?(H=s.jsxs(is,{value:a.role,onValueChange:D,children:[ue,pe]}),e[79]=a.role,e[80]=D,e[81]=H):H=e[81];let I;e[82]!==i?(I=i("role"),e[82]=i,e[83]=I):I=e[83];let P;e[84]!==I?(P=s.jsx(ke,{message:I}),e[84]=I,e[85]=P):P=e[85];let U;e[86]!==H||e[87]!==P?(U=s.jsxs("div",{className:"space-y-1",children:[fe,H,P]}),e[86]=H,e[87]=P,e[88]=U):U=e[88];let he;e[89]===Symbol.for("react.memo_cache_sentinel")?(he=t=>{Me(t),t||Te("")},e[89]=he):he=e[89];let xe;e[90]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(Xe,{asChild:!0,children:s.jsx(q,{type:"button",variant:"destructive",children:"Hapus Akun"})}),e[90]=xe):xe=e[90];let ge;e[91]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(Ye,{children:s.jsx(Ze,{children:"Hapus Akun User"})}),e[91]=ge):ge=e[91];let je;e[92]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx("p",{children:"Tindakan ini akan menghapus akun user dan melepaskan relasi dengan anggota."}),e[92]=je):je=e[92];let be;e[93]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsxs("p",{children:["Ketik ",s.jsx("span",{className:"font-semibold",children:"HAPUS"})," ","untuk konfirmasi:"]}),e[93]=be):be=e[93];let _e;e[94]===Symbol.for("react.memo_cache_sentinel")?(_e=t=>Te(t.target.value.toUpperCase()),e[94]=_e):_e=e[94];let F;e[95]!==m?(F=s.jsxs("div",{className:"space-y-3 text-sm",children:[je,be,s.jsx(we,{value:m,onChange:_e})]}),e[95]=m,e[96]=F):F=e[96];let ye;e[97]===Symbol.for("react.memo_cache_sentinel")?(ye=s.jsx(es,{asChild:!0,children:s.jsx(q,{variant:"secondary",type:"button",children:"Batal"})}),e[97]=ye):ye=e[97];const Le=m!=="HAPUS"||se;let T;e[98]!==se?(T=se&&s.jsx(Ge,{}),e[98]=se,e[99]=T):T=e[99];let O;e[100]!==$e||e[101]!==Le||e[102]!==T?(O=s.jsxs(ss,{className:"pt-3",children:[ye,s.jsxs(q,{type:"button",variant:"destructive",disabled:Le,onClick:$e,children:[T,"Hapus Akun"]})]}),e[100]=$e,e[101]=Le,e[102]=T,e[103]=O):O=e[103];let R;e[104]!==F||e[105]!==O?(R=s.jsxs(ts,{children:[ge,F,O]}),e[104]=F,e[105]=O,e[106]=R):R=e[106];let $;e[107]!==Fe||e[108]!==R?($=s.jsxs(as,{open:Fe,onOpenChange:he,children:[xe,R]}),e[107]=Fe,e[108]=R,e[109]=$):$=e[109];let ve;e[110]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(q,{type:"button",variant:"secondary",onClick:us,children:"Batal"}),e[110]=ve):ve=e[110];let B;e[111]!==c?(B=c&&s.jsx(Ge,{}),e[111]=c,e[112]=B):B=e[112];let L;e[113]!==c||e[114]!==B?(L=s.jsxs("div",{className:"flex gap-2",children:[ve,s.jsxs(q,{type:"submit",disabled:c,children:[B,"Simpan"]})]}),e[113]=c,e[114]=B,e[115]=L):L=e[115];let M;e[116]!==$||e[117]!==L?(M=s.jsxs("div",{className:"flex justify-between gap-2 pt-2",children:[$,L]}),e[116]=$,e[117]=L,e[118]=M):M=e[118];let z;e[119]!==Re||e[120]!==g||e[121]!==v||e[122]!==A||e[123]!==U||e[124]!==M?(z=s.jsxs("form",{onSubmit:Re,className:"space-y-4",children:[g,v,A,U,M]}),e[119]=Re,e[120]=g,e[121]=v,e[122]=A,e[123]=U,e[124]=M,e[125]=z):z=e[125];let G;e[126]!==f||e[127]!==z?(G=s.jsxs("div",{className:"mx-auto max-w-2xl space-y-4 rounded-lg border bg-background p-4 md:p-6",children:[ne,f,z]}),e[126]=f,e[127]=z,e[128]=G):G=e[128];let V;e[129]!==d||e[130]!==G?(V=s.jsxs("div",{className:"p-4",children:[d,G]}),e[129]=d,e[130]=G,e[131]=V):V=e[131];let Se;return e[132]!==Ce||e[133]!==V?(Se=s.jsxs(ls,{breadcrumbs:Ce,children:[re,V]}),e[132]=Ce,e[133]=V,e[134]=Se):Se=e[134],Se}function us(){return history.back()}function ps(o){return s.jsx(ms,{value:o,children:o},o)}function hs(o){return!o}export{Ts as default};
