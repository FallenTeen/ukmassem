import{c as jt,u as vt,r as j,j as t,H as bt}from"./app-P6dEBHuB.js";import{I as Xe}from"./input-error-DgnFeQNR.js";import{B as v}from"./app-logo-icon-C6P0zqqK.js";import{b as lt,c as it,C as nt,a as rt}from"./card-DKx4uLjh.js";import{I as Ye}from"./input-s65x02e2.js";import{L as b}from"./label-PaUswsNQ.js";import{a as ct,b as ot,c as dt,d as y,S as mt}from"./select-0NCozzLV.js";import{S as yt}from"./spinner-BOHTEugV.js";import{A as Nt}from"./app-layout-DDwDYC06.js";import{c as ft}from"./createLucideIcon-D2UukEZg.js";/* empty css            */import"./index-EKCV0cNf.js";import"./index-XwOQEk2p.js";import"./index-DQ55ufzE.js";import"./index-Bpqn9jTr.js";import"./tooltip-BmFw5_9G.js";import"./index-E1yFkMRt.js";import"./check-CcYeobWG.js";import"./loader-circle-DAQxbspK.js";import"./progress-CYXrDxWg.js";const kt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ut=ft("SquareCheck",kt);const _t=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],wt=ft("Square",_t),St=["rajawebsite","ketum_waketum","sekretaris","bendahara","dm","humas","kad_fot","kad_fil","kad_tar","kad_mus","kad_tea","rt","litbang","pelatih","pembina","po","anggota"];function as(l){const e=jt.c(152),{anggotas:r}=l;let se;e[0]===Symbol.for("react.memo_cache_sentinel")?(se=[{title:"Manajemen Akun",href:"/user-account"},{title:"Buat Akun Massal",href:"/user-account/bulk-create"}],e[0]=se):se=e[0];const xt=se;let ae;e[1]!==r.data?(ae=r.data.map(Bt),e[1]=r.data,e[2]=ae):ae=e[2];const Pe=ae;let le;e[3]!==Pe?(le={items:Pe},e[3]=Pe,e[4]=le):le=e[4];const{data:i,setData:d,post:De,processing:ie,errors:h,transform:Re}=vt(le),[c,Be]=j.useState("select"),[p,ht]=j.useState(""),[N,pt]=j.useState("example.com"),[x,Ze]=j.useState("auto"),[Z,et]=j.useState("nim");let ne;e[5]===Symbol.for("react.memo_cache_sentinel")?(ne={},e[5]=ne):ne=e[5];const[m,gt]=j.useState(ne),[ee,tt]=j.useState(null);let re;if(e[6]!==r.data||e[7]!==i.items||e[8]!==p){let a;e[10]!==r.data||e[11]!==p?(a=s=>{const n=r.data.find(o=>o.id===s.anggota_id);return n?p&&n.divisi!==p?{...s,hidden:!0}:{...s,hidden:!1}:s},e[10]=r.data,e[11]=p,e[12]=a):a=e[12],re=i.items.map(a),e[6]=r.data,e[7]=i.items,e[8]=p,e[9]=re}else re=e[9];const g=re;let ce;e[13]!==i.items||e[14]!==d?(ce=a=>{d("items",i.items.map(s=>s.anggota_id===a?{...s,selected:!s.selected}:s))},e[13]=i.items,e[14]=d,e[15]=ce):ce=e[15];const te=ce;let oe;e[16]!==i.items||e[17]!==g||e[18]!==d?(oe=()=>{const a=g.some(Rt);d("items",i.items.map(s=>{const n=g.find(o=>o.anggota_id===s.anggota_id);return!n||n.hidden?s:{...s,selected:a}}))},e[16]=i.items,e[17]=g,e[18]=d,e[19]=oe):oe=e[19];const Fe=oe;let de;e[20]!==r.data||e[21]!==N||e[22]!==i.items||e[23]!==x||e[24]!==Z||e[25]!==d?(de=()=>{d("items",i.items.map(a=>{const s=r.data.find($e=>$e.id===a.anggota_id);if(!s||!a.selected)return a;let n=a.email;x==="auto"&&s.NIM&&(n=`${s.NIM}@${N}`);let o=a.password;return Z==="nim"&&s.NIM&&(o=s.NIM),{...a,email:n,password:o}}))},e[20]=r.data,e[21]=N,e[22]=i.items,e[23]=x,e[24]=Z,e[25]=d,e[26]=de):de=e[26];const Le=de;let me;e[27]!==i.items?(me=()=>{const a={},s=i.items.filter(Dt);return s.length===0&&(a._global="Pilih minimal satu anggota."),s.forEach((n,o)=>{n.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(a[`items.${o}.email`]="Format email tidak valid."):a[`items.${o}.email`]="Email wajib diisi.",n.role||(a[`items.${o}.role`]="Role wajib diisi."),(!n.password||n.password.length<8)&&(a[`items.${o}.password`]="Password minimal 8 karakter.")}),gt(a),Object.keys(a).length===0},e[27]=i.items,e[28]=me):me=e[28];const k=me;let ue;e[29]!==Le||e[30]!==c||e[31]!==k?(ue=()=>{if(c==="select"){if(Le(),!k())return;Be("review")}},e[29]=Le,e[30]=c,e[31]=k,e[32]=ue):ue=e[32];const Te=ue;let fe;e[33]!==c?(fe=()=>{c==="review"&&Be("select")},e[33]=c,e[34]=fe):fe=e[34];const ze=fe;let xe;e[35]!==De||e[36]!==Re||e[37]!==k?(xe=()=>{if(!k()){Be("select");return}Re(At),De("/user-account/bulk-store",{onSuccess:()=>{tt({type:"success",message:"Akun massal berhasil dibuat."})},onError:()=>{tt({type:"error",message:"Gagal membuat akun massal."})}})},e[35]=De,e[36]=Re,e[37]=k,e[38]=xe):xe=e[38];const qe=xe;let he;e[39]!==i.items?(he=i.items.filter(Mt),e[39]=i.items,e[40]=he):he=e[40];const Ve=he.length;let pe;e[41]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(bt,{title:"Buat Akun Massal"}),e[41]=pe):pe=e[41];let _;e[42]!==ee?(_=ee&&t.jsx("div",{className:"mb-4 rounded-md border px-4 py-3 text-sm shadow-sm md:max-w-md",children:t.jsx("div",{className:ee.type==="success"?"text-green-800":"text-red-800",children:ee.message})}),e[42]=ee,e[43]=_):_=e[43];let ge;e[44]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsxs("div",{children:[t.jsx("h1",{className:"text-lg font-semibold",children:"Buat Akun Massal"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Pilih anggota dan review akun sebelum dibuat."})]}),e[44]=ge):ge=e[44];const He=c==="select"?"Pilih & Konfigurasi":"Review";let w;e[45]!==He?(w=t.jsxs("div",{className:"flex flex-col justify-between gap-2 md:flex-row md:items-center",children:[ge,t.jsxs("div",{className:"text-xs text-muted-foreground",children:["Langkah: ",He]})]}),e[45]=He,e[46]=w):w=e[46];let je;e[47]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx(lt,{children:t.jsx(it,{className:"text-sm",children:"Pengaturan Otomatis"})}),e[47]=je):je=e[47];let ve;e[48]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsx(b,{children:"Filter Divisi"}),e[48]=ve):ve=e[48];const Oe=p||"all";let be;e[49]===Symbol.for("react.memo_cache_sentinel")?(be=a=>ht(a==="all"?"":a),e[49]=be):be=e[49];let ye;e[50]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx(ct,{children:t.jsx(ot,{placeholder:"Semua divisi"})}),e[50]=ye):ye=e[50];let Ne;e[51]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsxs(dt,{children:[t.jsx(y,{value:"all",children:"Semua divisi"}),t.jsx(y,{value:"musik",children:"Musik"}),t.jsx(y,{value:"foto",children:"Foto"}),t.jsx(y,{value:"film",children:"Film"}),t.jsx(y,{value:"tari",children:"Tari"}),t.jsx(y,{value:"teater",children:"Teater"})]}),e[51]=Ne):Ne=e[51];let S;e[52]!==Oe?(S=t.jsxs("div",{className:"space-y-1",children:[ve,t.jsxs(mt,{value:Oe,onValueChange:be,children:[ye,Ne]})]}),e[52]=Oe,e[53]=S):S=e[53];let ke;e[54]===Symbol.for("react.memo_cache_sentinel")?(ke=t.jsx(b,{children:"Email"}),e[54]=ke):ke=e[54];const Ke=x==="auto"?"default":"outline";let _e;e[55]===Symbol.for("react.memo_cache_sentinel")?(_e=()=>Ze("auto"),e[55]=_e):_e=e[55];let C;e[56]!==Ke?(C=t.jsx(v,{type:"button",variant:Ke,size:"sm",onClick:_e,children:"Auto (NIM@domain)"}),e[56]=Ke,e[57]=C):C=e[57];const Ge=x==="manual"?"default":"outline";let we;e[58]===Symbol.for("react.memo_cache_sentinel")?(we=()=>Ze("manual"),e[58]=we):we=e[58];let E;e[59]!==Ge?(E=t.jsx(v,{type:"button",variant:Ge,size:"sm",onClick:we,children:"Manual"}),e[59]=Ge,e[60]=E):E=e[60];let I;e[61]!==C||e[62]!==E?(I=t.jsxs("div",{className:"flex gap-2",children:[C,E]}),e[61]=C,e[62]=E,e[63]=I):I=e[63];let M;e[64]!==N||e[65]!==x?(M=x==="auto"&&t.jsxs("div",{className:"space-y-1",children:[t.jsx(b,{children:"Domain Email"}),t.jsx(Ye,{value:N,onChange:a=>pt(a.target.value),placeholder:"example.com"})]}),e[64]=N,e[65]=x,e[66]=M):M=e[66];let A;e[67]!==I||e[68]!==M?(A=t.jsxs("div",{className:"space-y-2",children:[ke,I,M]}),e[67]=I,e[68]=M,e[69]=A):A=e[69];let Se;e[70]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsx(b,{children:"Password"}),e[70]=Se):Se=e[70];const Ue=Z==="nim"?"default":"outline";let Ce;e[71]===Symbol.for("react.memo_cache_sentinel")?(Ce=()=>et("nim"),e[71]=Ce):Ce=e[71];let $;e[72]!==Ue?($=t.jsx(v,{type:"button",variant:Ue,size:"sm",onClick:Ce,children:"Default: NIM"}),e[72]=Ue,e[73]=$):$=e[73];const Je=Z==="manual"?"default":"outline";let Ee;e[74]===Symbol.for("react.memo_cache_sentinel")?(Ee=()=>et("manual"),e[74]=Ee):Ee=e[74];let P;e[75]!==Je?(P=t.jsx(v,{type:"button",variant:Je,size:"sm",onClick:Ee,children:"Manual"}),e[75]=Je,e[76]=P):P=e[76];let D;e[77]!==$||e[78]!==P?(D=t.jsxs("div",{className:"space-y-2",children:[Se,t.jsxs("div",{className:"flex gap-2",children:[$,P]})]}),e[77]=$,e[78]=P,e[79]=D):D=e[79];let R;e[80]!==Ve?(R=t.jsxs("div",{children:["Dipilih: ",t.jsx("span",{className:"font-semibold",children:Ve})," ","anggota"]}),e[80]=Ve,e[81]=R):R=e[81];let B;e[82]!==m._global?(B=m._global&&t.jsx("div",{className:"text-red-600",children:m._global}),e[82]=m._global,e[83]=B):B=e[83];let F;e[84]!==R||e[85]!==B?(F=t.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[R,B]}),e[84]=R,e[85]=B,e[86]=F):F=e[86];let L;e[87]!==S||e[88]!==A||e[89]!==D||e[90]!==F?(L=t.jsxs(nt,{children:[je,t.jsxs(rt,{className:"space-y-4 text-sm",children:[S,A,D,F]})]}),e[87]=S,e[88]=A,e[89]=D,e[90]=F,e[91]=L):L=e[91];const Qe=c==="select"?"Pilih Anggota & Isi Data":"Review Akun yang Akan Dibuat";let T;e[92]!==Qe?(T=t.jsx(lt,{children:t.jsx(it,{className:"text-sm",children:Qe})}),e[92]=Qe,e[93]=T):T=e[93];let Ie,Me;e[94]===Symbol.for("react.memo_cache_sentinel")?(Ie=t.jsx(ut,{className:"h-4 w-4"}),Me=t.jsx("span",{children:"Pilih / hapus semua yang terlihat"}),e[94]=Ie,e[95]=Me):(Ie=e[94],Me=e[95]);let z;e[96]!==Fe?(z=t.jsx("div",{className:"flex items-center justify-between text-xs",children:t.jsxs("button",{type:"button",className:"flex items-center gap-2 text-primary",onClick:Fe,children:[Ie,Me]})}),e[96]=Fe,e[97]=z):z=e[97];let q;if(e[98]!==r.data||e[99]!==m||e[100]!==i.items||e[101]!==h||e[102]!==g||e[103]!==d||e[104]!==te){let a;e[106]!==r.data||e[107]!==m||e[108]!==i.items||e[109]!==h||e[110]!==d||e[111]!==te?(a=s=>{if(s.hidden)return null;const n=r.data.find(f=>f.id===s.anggota_id);if(!n)return null;const o=i.items.findIndex(f=>f.anggota_id===s.anggota_id),$e=m[`items.${o}.email`]||h[`items.${o}.email`],st=m[`items.${o}.password`]||h[`items.${o}.password`],at=m[`items.${o}.role`]||h[`items.${o}.role`];return t.jsxs("div",{className:`rounded-md border p-2 ${s.selected?"border-primary/70 bg-primary/5":""}`,children:[t.jsx("div",{className:"flex items-center justify-between gap-2",children:t.jsxs("button",{type:"button",className:"flex items-center gap-2",onClick:()=>te(s.anggota_id),children:[s.selected?t.jsx(ut,{className:"h-4 w-4 text-primary"}):t.jsx(wt,{className:"h-4 w-4 text-muted-foreground"}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-medium",children:n.nama_lengkap||n.user?.name||`Anggota #${n.id}`}),t.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["NIM ",n.NIM||"-"," Â·"," ",n.divisi||"-"]})]})]})}),s.selected&&t.jsxs("div",{className:"mt-2 grid gap-2 md:grid-cols-3",children:[t.jsxs("div",{className:"space-y-1 md:col-span-1",children:[t.jsx(b,{className:"text-[11px]",children:"Email"}),t.jsx(Ye,{value:s.email,onChange:f=>d("items",i.items.map(u=>u.anggota_id===s.anggota_id?{...u,email:f.target.value}:u)),className:"h-7 text-[11px]"}),$e&&t.jsx(Xe,{className:"text-[11px]",message:String($e)})]}),t.jsxs("div",{className:"space-y-1 md:col-span-1",children:[t.jsx(b,{className:"text-[11px]",children:"Password"}),t.jsx(Ye,{value:s.password,onChange:f=>d("items",i.items.map(u=>u.anggota_id===s.anggota_id?{...u,password:f.target.value}:u)),className:"h-7 text-[11px]"}),st&&t.jsx(Xe,{className:"text-[11px]",message:String(st)})]}),t.jsxs("div",{className:"space-y-1 md:col-span-1",children:[t.jsx(b,{className:"text-[11px]",children:"Role"}),t.jsxs(mt,{value:s.role,onValueChange:f=>d("items",i.items.map(u=>u.anggota_id===s.anggota_id?{...u,role:f}:u)),children:[t.jsx(ct,{className:"h-7 text-[11px]",children:t.jsx(ot,{})}),t.jsx(dt,{children:St.map(It)})]}),at&&t.jsx(Xe,{className:"text-[11px]",message:String(at)})]})]})]},s.anggota_id)},e[106]=r.data,e[107]=m,e[108]=i.items,e[109]=h,e[110]=d,e[111]=te,e[112]=a):a=e[112],q=g.map(a),e[98]=r.data,e[99]=m,e[100]=i.items,e[101]=h,e[102]=g,e[103]=d,e[104]=te,e[105]=q}else q=e[105];let V;e[113]!==q?(V=t.jsx("div",{className:"max-h-[420px] space-y-2 overflow-y-auto pr-1 text-xs",children:q}),e[113]=q,e[114]=V):V=e[114];let H;e[115]!==r.data||e[116]!==i.items||e[117]!==c?(H=c==="review"&&t.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground",children:[t.jsx("div",{className:"font-semibold",children:"Preview akun yang akan dibuat:"}),i.items.filter(Et).length===0?t.jsx("div",{children:"Tidak ada akun yang akan dibuat."}):t.jsx("ul",{className:"list-inside list-disc space-y-1",children:i.items.filter(Ct).map(a=>{const s=r.data.find(n=>n.id===a.anggota_id);return s?t.jsxs("li",{children:[s.nama_lengkap||s.user?.name||`Anggota #${s.id}`," ","- ",a.email," (",a.role,")"]},a.anggota_id):null})})]}),e[115]=r.data,e[116]=i.items,e[117]=c,e[118]=H):H=e[118];let O;e[119]!==z||e[120]!==V||e[121]!==H?(O=t.jsxs(rt,{className:"space-y-3",children:[z,V,H]}),e[119]=z,e[120]=V,e[121]=H,e[122]=O):O=e[122];let K;e[123]!==T||e[124]!==O?(K=t.jsxs(nt,{children:[T,O]}),e[123]=T,e[124]=O,e[125]=K):K=e[125];let G;e[126]!==L||e[127]!==K?(G=t.jsxs("div",{className:"grid gap-4 md:grid-cols-[2fr_3fr]",children:[L,K]}),e[126]=L,e[127]=K,e[128]=G):G=e[128];const We=c==="select";let U;e[129]!==ze||e[130]!==We?(U=t.jsx(v,{type:"button",variant:"secondary",onClick:ze,disabled:We,children:"Kembali"}),e[129]=ze,e[130]=We,e[131]=U):U=e[131];let J;e[132]!==Te||e[133]!==c?(J=c==="select"&&t.jsx(v,{type:"button",onClick:Te,children:"Lanjut Review"}),e[132]=Te,e[133]=c,e[134]=J):J=e[134];let Q;e[135]!==qe||e[136]!==ie||e[137]!==c?(Q=c==="review"&&t.jsxs(v,{type:"button",disabled:ie,onClick:qe,children:[ie&&t.jsx(yt,{}),"Create All"]}),e[135]=qe,e[136]=ie,e[137]=c,e[138]=Q):Q=e[138];let W;e[139]!==J||e[140]!==Q?(W=t.jsxs("div",{className:"flex gap-2",children:[J,Q]}),e[139]=J,e[140]=Q,e[141]=W):W=e[141];let X;e[142]!==U||e[143]!==W?(X=t.jsxs("div",{className:"flex justify-between gap-2",children:[U,W]}),e[142]=U,e[143]=W,e[144]=X):X=e[144];let Y;e[145]!==w||e[146]!==G||e[147]!==X?(Y=t.jsxs("div",{className:"mx-auto max-w-5xl space-y-4",children:[w,G,X]}),e[145]=w,e[146]=G,e[147]=X,e[148]=Y):Y=e[148];let Ae;return e[149]!==_||e[150]!==Y?(Ae=t.jsxs(Nt,{breadcrumbs:xt,children:[pe,t.jsxs("div",{className:"p-4",children:[_,Y]})]}),e[149]=_,e[150]=Y,e[151]=Ae):Ae=e[151],Ae}function Ct(l){return l.selected}function Et(l){return l.selected}function It(l){return t.jsx(y,{value:l,children:l},l)}function Mt(l){return l.selected}function At(l){return{items:l.items.filter(Pt).map($t)}}function $t(l){return{anggota_id:l.anggota_id,name:l.name,email:l.email,password:l.password,role:l.role}}function Pt(l){return l.selected}function Dt(l){return l.selected}function Rt(l){return!l.hidden&&!l.selected}function Bt(l){return{anggota_id:l.id,name:l.nama_lengkap||l.user?.name||"",email:"",password:"",role:"anggota",selected:!1}}export{as as default};
