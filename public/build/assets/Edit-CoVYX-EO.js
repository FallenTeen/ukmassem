import{c as Pa,u as wa,r as ka,j as a,a as Ba,H as Ia}from"./app-P6dEBHuB.js";import{I as d}from"./input-error-DgnFeQNR.js";import{B as fe}from"./app-logo-icon-C6P0zqqK.js";import{A as Ta,D as Aa,c as Ea,d as Ma,e as Fa,f as $a,g as Ua}from"./app-layout-DDwDYC06.js";import{I as pe}from"./input-s65x02e2.js";import{L as m}from"./label-PaUswsNQ.js";import{S as Je,a as Qe,b as We,c as Xe,d as o}from"./select-0NCozzLV.js";import{c as Va}from"./createLucideIcon-D2UukEZg.js";/* empty css            */import"./index-EKCV0cNf.js";import"./index-XwOQEk2p.js";import"./index-Bpqn9jTr.js";import"./tooltip-BmFw5_9G.js";import"./progress-CYXrDxWg.js";import"./index-DQ55ufzE.js";import"./index-E1yFkMRt.js";import"./check-CcYeobWG.js";const Ka=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],La=Va("TriangleAlert",Ka),Oa=r=>[{title:"Proker",href:"/proker"},{title:r.nama_lengkap,href:`/proker/${r.id}/edit`}];function ms(r){const e=Pa.c(196),{proker:l,mainProkers:Ye,ketuaOptions:c}=r,Ze=l.ketua_pelaksana_id,ga=l.ketua_pelaksana_history??[],ea=String(l.main_proker_id),ja=l.nama_lengkap,aa=String(l.tahun),sa=l.tanggal_mulai??"",ta=l.tanggal_selesai??"",la=l.deskripsi??"",ia=l.ketua_pelaksana_id!==null?String(l.ketua_pelaksana_id):"";let he;e[0]!==l.nama_lengkap||e[1]!==l.status||e[2]!==ea||e[3]!==aa||e[4]!==sa||e[5]!==ta||e[6]!==la||e[7]!==ia?(he={main_proker_id:ea,nama_main_proker_baru:"",nama_lengkap:ja,tahun:aa,tanggal_mulai:sa,tanggal_selesai:ta,deskripsi:la,status:l.status,ketua_pelaksana_id:ia},e[0]=l.nama_lengkap,e[1]=l.status,e[2]=ea,e[3]=aa,e[4]=sa,e[5]=ta,e[6]=la,e[7]=ia,e[8]=he):he=e[8];const{data:s,setData:i,put:na,processing:ke,errors:n}=wa(he),[u,ba]=ka.useState(l.status),[ra,oa]=ka.useState(!1),[_e,ge]=ka.useState(null);let xe;e[9]!==s.ketua_pelaksana_id||e[10]!==c?(xe=s.ketua_pelaksana_id!==""&&c.find(t=>String(t.id)===s.ketua_pelaksana_id)||null,e[9]=s.ketua_pelaksana_id,e[10]=c,e[11]=xe):xe=e[11];const p=xe;let je;e[12]!==c||e[13]!==l.ketua_pelaksana||e[14]!==l.ketua_pelaksana_id?(je=t=>{if(t===null)return"Belum ditentukan";const ue=c.find(Da=>Da.id===t)||(l.ketua_pelaksana_id===t?l.ketua_pelaksana??void 0:void 0);return ue?ue.nama_lengkap||ue.user?.name||`ID ${t}`:`ID ${t}`},e[12]=c,e[13]=l.ketua_pelaksana,e[14]=l.ketua_pelaksana_id,e[15]=je):je=e[15];const xa=je;let be;e[16]!==s.ketua_pelaksana_id||e[17]!==Ze||e[18]!==l.id||e[19]!==na?(be=t=>{t.preventDefault(),!(s.ketua_pelaksana_id!==""&&String(Ze??"")!==s.ketua_pelaksana_id&&!window.confirm("Anda yakin ingin mengganti ketua pelaksana untuk proker ini?"))&&na(`/proker/${l.id}`,{onSuccess:()=>{ge({type:"success",message:"Proker berhasil diperbarui."})},onError:()=>{ge({type:"error",message:"Terjadi kesalahan saat memperbarui proker."})}})},e[16]=s.ketua_pelaksana_id,e[17]=Ze,e[18]=l.id,e[19]=na,e[20]=be):be=e[20];const ma=be;let ye;e[21]!==l.id||e[22]!==u?(ye=()=>{Ba.post(`/proker/${l.id}/status`,{status:u},{onSuccess:()=>{ge({type:"success",message:"Status proker berhasil diperbarui."}),oa(!1)},onError:()=>{ge({type:"error",message:"Gagal memperbarui status proker."})}})},e[21]=l.id,e[22]=u,e[23]=ye):ye=e[23];const ca=ye,da=Ta;let _;e[24]!==l?(_=Oa(l),e[24]=l,e[25]=_):_=e[25];const ua=`Edit Proker - ${l.nama_lengkap}`;let f;e[26]!==ua?(f=a.jsx(Ia,{title:ua}),e[26]=ua,e[27]=f):f=e[27];const ya="p-4";let h;e[28]!==_e?(h=_e&&a.jsx("div",{className:"mb-4 rounded-md border px-4 py-3 text-sm shadow-sm md:max-w-md",children:a.jsx("div",{className:_e.type==="success"?"text-green-800":"text-red-800",children:_e.message})}),e[28]=_e,e[29]=h):h=e[29];const va="mx-auto max-w-3xl space-y-6 rounded-lg border bg-background p-4 md:p-6";let ve;e[30]===Symbol.for("react.memo_cache_sentinel")?(ve=a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-semibold",children:"Edit Proker"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Perbarui informasi dan ketua pelaksana proker."})]}),e[30]=ve):ve=e[30];let Se;e[31]===Symbol.for("react.memo_cache_sentinel")?(Se=a.jsx(Aa,{asChild:!0,children:a.jsx(fe,{type:"button",variant:"outline",size:"sm",children:"Update Status"})}),e[31]=Se):Se=e[31];let Ne;e[32]===Symbol.for("react.memo_cache_sentinel")?(Ne=a.jsx(Ea,{children:a.jsx(Ma,{children:"Update Status Proker"})}),e[32]=Ne):Ne=e[32];let Ce;e[33]===Symbol.for("react.memo_cache_sentinel")?(Ce=a.jsxs("div",{className:"flex items-start gap-2 rounded-md bg-amber-50 p-3 text-xs text-amber-900",children:[a.jsx(La,{className:"mt-0.5 h-4 w-4"}),a.jsx("p",{children:"Perubahan status akan mempengaruhi alur proker. Pastikan status sesuai dengan progres aktual."})]}),e[33]=Ce):Ce=e[33];let De;e[34]===Symbol.for("react.memo_cache_sentinel")?(De=a.jsx(m,{children:"Status Baru"}),e[34]=De):De=e[34];let Pe;e[35]===Symbol.for("react.memo_cache_sentinel")?(Pe=t=>ba(t),e[35]=Pe):Pe=e[35];let we;e[36]===Symbol.for("react.memo_cache_sentinel")?(we=a.jsx(Qe,{children:a.jsx(We,{})}),e[36]=we):we=e[36];let Be;e[37]===Symbol.for("react.memo_cache_sentinel")?(Be=a.jsxs(Xe,{children:[a.jsx(o,{value:"draft",children:"Draft"}),a.jsx(o,{value:"aktif",children:"Aktif"}),a.jsx(o,{value:"selesai",children:"Selesai"}),a.jsx(o,{value:"dibatalkan",children:"Dibatalkan"})]}),e[37]=Be):Be=e[37];let k;e[38]!==u?(k=a.jsxs("div",{className:"space-y-4",children:[Ce,a.jsxs("div",{className:"space-y-1",children:[De,a.jsxs(Je,{value:u,onValueChange:Pe,children:[we,Be]})]})]}),e[38]=u,e[39]=k):k=e[39];let Ie;e[40]===Symbol.for("react.memo_cache_sentinel")?(Ie=a.jsx(fe,{type:"button",variant:"secondary",onClick:()=>oa(!1),children:"Batal"}),e[40]=Ie):Ie=e[40];const pa=u===l.status;let g;e[41]!==ca||e[42]!==pa?(g=a.jsxs(Fa,{className:"pt-3",children:[Ie,a.jsx(fe,{type:"button",disabled:pa,onClick:ca,children:"Simpan Status"})]}),e[41]=ca,e[42]=pa,e[43]=g):g=e[43];let x;e[44]!==k||e[45]!==g?(x=a.jsxs($a,{children:[Ne,k,g]}),e[44]=k,e[45]=g,e[46]=x):x=e[46];let j;e[47]!==ra||e[48]!==x?(j=a.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[ve,a.jsxs(Ua,{open:ra,onOpenChange:oa,children:[Se,x]})]}),e[47]=ra,e[48]=x,e[49]=j):j=e[49];const Sa="space-y-6";let Te;e[50]===Symbol.for("react.memo_cache_sentinel")?(Te=a.jsx(m,{children:"Main Proker"}),e[50]=Te):Te=e[50];const Na=s.main_proker_id;let b;e[51]!==i?(b=t=>i("main_proker_id",t),e[51]=i,e[52]=b):b=e[52];let Ae;e[53]===Symbol.for("react.memo_cache_sentinel")?(Ae=a.jsx(Qe,{children:a.jsx(We,{})}),e[53]=Ae):Ae=e[53];let y;e[54]!==Ye?(y=Ye.map(za),e[54]=Ye,e[55]=y):y=e[55];let Ee;e[56]===Symbol.for("react.memo_cache_sentinel")?(Ee=a.jsx(o,{value:"new",children:"Buat Main Proker Baru"}),e[56]=Ee):Ee=e[56];let v;e[57]!==y?(v=a.jsxs(Xe,{children:[y,Ee]}),e[57]=y,e[58]=v):v=e[58];let S;e[59]!==s.main_proker_id||e[60]!==b||e[61]!==v?(S=a.jsxs(Je,{value:Na,onValueChange:b,children:[Ae,v]}),e[59]=s.main_proker_id,e[60]=b,e[61]=v,e[62]=S):S=e[62];let N;e[63]!==n.main_proker_id?(N=a.jsx(d,{message:n.main_proker_id}),e[63]=n.main_proker_id,e[64]=N):N=e[64];let C;e[65]!==S||e[66]!==N?(C=a.jsxs("div",{className:"space-y-1",children:[Te,S,N]}),e[65]=S,e[66]=N,e[67]=C):C=e[67];let D;e[68]!==s.main_proker_id||e[69]!==s.nama_main_proker_baru||e[70]!==n.nama_main_proker_baru||e[71]!==i?(D=s.main_proker_id==="new"&&a.jsxs("div",{className:"space-y-1",children:[a.jsx(m,{htmlFor:"nama_main_proker_baru",children:"Nama Main Proker Baru"}),a.jsx(pe,{id:"nama_main_proker_baru",value:s.nama_main_proker_baru,onChange:t=>i("nama_main_proker_baru",t.target.value)}),a.jsx(d,{message:n.nama_main_proker_baru})]}),e[68]=s.main_proker_id,e[69]=s.nama_main_proker_baru,e[70]=n.nama_main_proker_baru,e[71]=i,e[72]=D):D=e[72];let Me;e[73]===Symbol.for("react.memo_cache_sentinel")?(Me=a.jsx(m,{htmlFor:"nama_lengkap",children:"Nama Proker"}),e[73]=Me):Me=e[73];let P;e[74]!==i?(P=t=>i("nama_lengkap",t.target.value),e[74]=i,e[75]=P):P=e[75];let w;e[76]!==s.nama_lengkap||e[77]!==P?(w=a.jsx(pe,{id:"nama_lengkap",value:s.nama_lengkap,onChange:P}),e[76]=s.nama_lengkap,e[77]=P,e[78]=w):w=e[78];let B;e[79]!==n.nama_lengkap?(B=a.jsx(d,{message:n.nama_lengkap}),e[79]=n.nama_lengkap,e[80]=B):B=e[80];let I;e[81]!==w||e[82]!==B?(I=a.jsxs("div",{className:"space-y-1",children:[Me,w,B]}),e[81]=w,e[82]=B,e[83]=I):I=e[83];let Fe;e[84]===Symbol.for("react.memo_cache_sentinel")?(Fe=a.jsx(m,{htmlFor:"tahun",children:"Tahun"}),e[84]=Fe):Fe=e[84];let T;e[85]!==i?(T=t=>i("tahun",t.target.value),e[85]=i,e[86]=T):T=e[86];let A;e[87]!==s.tahun||e[88]!==T?(A=a.jsx(pe,{id:"tahun",type:"number",value:s.tahun,onChange:T}),e[87]=s.tahun,e[88]=T,e[89]=A):A=e[89];let E;e[90]!==n.tahun?(E=a.jsx(d,{message:n.tahun}),e[90]=n.tahun,e[91]=E):E=e[91];let M;e[92]!==A||e[93]!==E?(M=a.jsxs("div",{className:"space-y-1",children:[Fe,A,E]}),e[92]=A,e[93]=E,e[94]=M):M=e[94];let $e;e[95]===Symbol.for("react.memo_cache_sentinel")?($e=a.jsx(m,{htmlFor:"tanggal_mulai",children:"Tanggal Mulai"}),e[95]=$e):$e=e[95];let F;e[96]!==i?(F=t=>i("tanggal_mulai",t.target.value),e[96]=i,e[97]=F):F=e[97];let $;e[98]!==s.tanggal_mulai||e[99]!==F?($=a.jsx(pe,{id:"tanggal_mulai",type:"date",value:s.tanggal_mulai,onChange:F}),e[98]=s.tanggal_mulai,e[99]=F,e[100]=$):$=e[100];let U;e[101]!==n.tanggal_mulai?(U=a.jsx(d,{message:n.tanggal_mulai}),e[101]=n.tanggal_mulai,e[102]=U):U=e[102];let V;e[103]!==$||e[104]!==U?(V=a.jsxs("div",{className:"space-y-1",children:[$e,$,U]}),e[103]=$,e[104]=U,e[105]=V):V=e[105];let Ue;e[106]===Symbol.for("react.memo_cache_sentinel")?(Ue=a.jsx(m,{htmlFor:"tanggal_selesai",children:"Tanggal Selesai"}),e[106]=Ue):Ue=e[106];let K;e[107]!==i?(K=t=>i("tanggal_selesai",t.target.value),e[107]=i,e[108]=K):K=e[108];let L;e[109]!==s.tanggal_selesai||e[110]!==K?(L=a.jsx(pe,{id:"tanggal_selesai",type:"date",value:s.tanggal_selesai,onChange:K}),e[109]=s.tanggal_selesai,e[110]=K,e[111]=L):L=e[111];let O;e[112]!==n.tanggal_selesai?(O=a.jsx(d,{message:n.tanggal_selesai}),e[112]=n.tanggal_selesai,e[113]=O):O=e[113];let H;e[114]!==L||e[115]!==O?(H=a.jsxs("div",{className:"space-y-1",children:[Ue,L,O]}),e[114]=L,e[115]=O,e[116]=H):H=e[116];let R;e[117]!==M||e[118]!==V||e[119]!==H?(R=a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[M,V,H]}),e[117]=M,e[118]=V,e[119]=H,e[120]=R):R=e[120];let Ve;e[121]===Symbol.for("react.memo_cache_sentinel")?(Ve=a.jsx(m,{htmlFor:"deskripsi",children:"Deskripsi"}),e[121]=Ve):Ve=e[121];let z;e[122]!==i?(z=t=>i("deskripsi",t.target.value),e[122]=i,e[123]=z):z=e[123];let q;e[124]!==s.deskripsi||e[125]!==z?(q=a.jsx(pe,{id:"deskripsi",value:s.deskripsi,onChange:z}),e[124]=s.deskripsi,e[125]=z,e[126]=q):q=e[126];let G;e[127]!==n.deskripsi?(G=a.jsx(d,{message:n.deskripsi}),e[127]=n.deskripsi,e[128]=G):G=e[128];let J;e[129]!==q||e[130]!==G?(J=a.jsxs("div",{className:"space-y-1",children:[Ve,q,G]}),e[129]=q,e[130]=G,e[131]=J):J=e[131];let Ke;e[132]===Symbol.for("react.memo_cache_sentinel")?(Ke=a.jsx(m,{children:"Status Proker"}),e[132]=Ke):Ke=e[132];let Q;e[133]!==i?(Q=t=>i("status",t),e[133]=i,e[134]=Q):Q=e[134];let Le;e[135]===Symbol.for("react.memo_cache_sentinel")?(Le=a.jsx(Qe,{children:a.jsx(We,{})}),e[135]=Le):Le=e[135];let Oe;e[136]===Symbol.for("react.memo_cache_sentinel")?(Oe=a.jsxs(Xe,{children:[a.jsx(o,{value:"draft",children:"Draft"}),a.jsx(o,{value:"aktif",children:"Aktif"}),a.jsx(o,{value:"selesai",children:"Selesai"}),a.jsx(o,{value:"dibatalkan",children:"Dibatalkan"})]}),e[136]=Oe):Oe=e[136];let W;e[137]!==s.status||e[138]!==Q?(W=a.jsxs(Je,{value:s.status,onValueChange:Q,children:[Le,Oe]}),e[137]=s.status,e[138]=Q,e[139]=W):W=e[139];let X;e[140]!==n.status?(X=a.jsx(d,{message:n.status}),e[140]=n.status,e[141]=X):X=e[141];let Y;e[142]!==W||e[143]!==X?(Y=a.jsxs("div",{className:"space-y-1",children:[Ke,W,X]}),e[142]=W,e[143]=X,e[144]=Y):Y=e[144];let Z;e[145]!==C||e[146]!==D||e[147]!==I||e[148]!==R||e[149]!==J||e[150]!==Y?(Z=a.jsxs("div",{className:"space-y-4",children:[C,D,I,R,J,Y]}),e[145]=C,e[146]=D,e[147]=I,e[148]=R,e[149]=J,e[150]=Y,e[151]=Z):Z=e[151];const Ca="space-y-4";let He;e[152]===Symbol.for("react.memo_cache_sentinel")?(He=a.jsx(m,{children:"Ketua Pelaksana"}),e[152]=He):He=e[152];const _a=s.ketua_pelaksana_id||"none";let ee;e[153]!==i?(ee=t=>i("ketua_pelaksana_id",t==="none"?"":t),e[153]=i,e[154]=ee):ee=e[154];let Re;e[155]===Symbol.for("react.memo_cache_sentinel")?(Re=a.jsx(Qe,{children:a.jsx(We,{placeholder:"Belum ditentukan"})}),e[155]=Re):Re=e[155];let ze;e[156]===Symbol.for("react.memo_cache_sentinel")?(ze=a.jsx(o,{value:"none",children:"Belum ditentukan"}),e[156]=ze):ze=e[156];let ae;e[157]!==c?(ae=c.map(Ra),e[157]=c,e[158]=ae):ae=e[158];let se;e[159]!==ae?(se=a.jsxs(Xe,{children:[ze,ae]}),e[159]=ae,e[160]=se):se=e[160];let te;e[161]!==_a||e[162]!==ee||e[163]!==se?(te=a.jsxs(Je,{value:_a,onValueChange:ee,children:[Re,se]}),e[161]=_a,e[162]=ee,e[163]=se,e[164]=te):te=e[164];let le;e[165]!==n.ketua_pelaksana_id?(le=a.jsx(d,{message:n.ketua_pelaksana_id}),e[165]=n.ketua_pelaksana_id,e[166]=le):le=e[166];let ie;e[167]!==te||e[168]!==le?(ie=a.jsxs("div",{className:"space-y-1",children:[He,te,le]}),e[167]=te,e[168]=le,e[169]=ie):ie=e[169];let ne;e[170]!==p?(ne=p&&a.jsxs("div",{className:"rounded-md bg-muted/60 p-3 text-sm",children:[a.jsx("div",{className:"font-medium",children:p.nama_lengkap||p.user?.name||"-"}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["NIM: ",p.NIM||"-"," | Divisi:"," ",p.divisi||"-"]})]}),e[170]=p,e[171]=ne):ne=e[171];const fa=ga.length>0&&a.jsxs("div",{className:"space-y-2 rounded-md bg-muted/40 p-3 text-xs",children:[a.jsx("div",{className:"font-semibold text-sm",children:"Riwayat Pergantian Ketua Pelaksana"}),a.jsx("ul",{className:"space-y-1.5",children:ga.slice().reverse().map((t,ue)=>a.jsxs("li",{children:[a.jsx("span",{className:"font-medium",children:t.tanggal})," ",":"," ",a.jsxs("span",{children:[xa(t.old_id)," â†’"," ",xa(t.new_id)]})]},ue))})]});let re;e[172]!==ie||e[173]!==ne||e[174]!==fa?(re=a.jsxs("div",{className:Ca,children:[ie,ne,fa]}),e[172]=ie,e[173]=ne,e[174]=fa,e[175]=re):re=e[175];let qe;e[176]===Symbol.for("react.memo_cache_sentinel")?(qe=a.jsx(fe,{type:"button",variant:"secondary",onClick:Ha,children:"Batal"}),e[176]=qe):qe=e[176];const ha=ke?"Menyimpan...":"Simpan Perubahan";let oe;e[177]!==ke||e[178]!==ha?(oe=a.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[qe,a.jsx(fe,{type:"submit",disabled:ke,children:ha})]}),e[177]=ke,e[178]=ha,e[179]=oe):oe=e[179];let me;e[180]!==ma||e[181]!==Z||e[182]!==re||e[183]!==oe?(me=a.jsxs("form",{onSubmit:ma,className:Sa,children:[Z,re,oe]}),e[180]=ma,e[181]=Z,e[182]=re,e[183]=oe,e[184]=me):me=e[184];let ce;e[185]!==j||e[186]!==me?(ce=a.jsxs("div",{className:va,children:[j,me]}),e[185]=j,e[186]=me,e[187]=ce):ce=e[187];let de;e[188]!==h||e[189]!==ce?(de=a.jsxs("div",{className:ya,children:[h,ce]}),e[188]=h,e[189]=ce,e[190]=de):de=e[190];let Ge;return e[191]!==da||e[192]!==_||e[193]!==f||e[194]!==de?(Ge=a.jsxs(da,{breadcrumbs:_,children:[f,de]}),e[191]=da,e[192]=_,e[193]=f,e[194]=de,e[195]=Ge):Ge=e[195],Ge}function Ha(){return window.history.back()}function Ra(r){return a.jsx(o,{value:String(r.id),children:r.nama_lengkap||r.user?.name||"-"},r.id)}function za(r){return a.jsx(o,{value:String(r.id),children:r.nama_proker},r.id)}export{ms as default};
