import{c as ge,r as K,u as je,j as s,a as ne,H as fe,L as ke}from"./app-P6dEBHuB.js";import{I as le}from"./input-error-DgnFeQNR.js";import{B as be}from"./badge-DvWSpYcc.js";import{B as T}from"./app-logo-icon-C6P0zqqK.js";import{g as ve,D as Ne,f as ye,c as _e,d as Se,e as Te,A as De}from"./app-layout-DDwDYC06.js";import{I as de}from"./input-s65x02e2.js";import{L as V}from"./label-PaUswsNQ.js";import{S as oe,a as ce,b as me,c as xe,d as pe}from"./select-0NCozzLV.js";import we from"./Rekap-CJtW6uWY.js";/* empty css            */import"./index-EKCV0cNf.js";import"./index-XwOQEk2p.js";import"./index-Bpqn9jTr.js";import"./tooltip-BmFw5_9G.js";import"./createLucideIcon-D2UukEZg.js";import"./progress-CYXrDxWg.js";import"./index-DQ55ufzE.js";import"./index-E1yFkMRt.js";import"./check-CcYeobWG.js";import"./card-DKx4uLjh.js";const Ce={draft:"Draft",aktif:"Aktif",selesai:"Selesai",dibatalkan:"Dibatalkan"},Pe={draft:"secondary",aktif:"default",selesai:"outline",dibatalkan:"destructive"},Ae=r=>[{title:"Proker",href:"/proker"},{title:r.nama_lengkap,href:`/proker/${r.id}`}];function as(r){const e=ge.c(86),{proker:a,timeline:A,anggota:G,otherProkers:J}=r,[l,ue]=K.useState("detail"),[O,U]=K.useState(!1),[i,ie]=K.useState(""),[D,n]=K.useState(null);let B;e[0]!==a.id?(B={proker_id:a.id,anggota_id:"",jabatan:"",divisi_proker:""},e[0]=a.id,e[1]=B):B=e[1];const{data:w,setData:C,post:M,processing:q,errors:P,reset:Q}=je(B);let E;e[2]!==a.proker_strukturs?(E=a.proker_strukturs??[],e[2]=a.proker_strukturs,e[3]=E):E=e[3];const L=E;let R;e[4]!==M||e[5]!==Q?(R=t=>{t.preventDefault(),M("/proker-struktur",{onSuccess:()=>{Q("anggota_id","jabatan","divisi_proker"),n({type:"success",message:"Struktur proker berhasil ditambahkan."})},onError:()=>{n({type:"error",message:"Gagal menambahkan struktur proker."})}})},e[4]=M,e[5]=Q,e[6]=R):R=e[6];const W=R;let $;e[7]===Symbol.for("react.memo_cache_sentinel")?($=t=>{ne.delete(`/proker-struktur/${t.id}`,{onSuccess:()=>{n({type:"success",message:"Struktur proker berhasil dihapus."})},onError:()=>{n({type:"error",message:"Gagal menghapus struktur proker."})}})},e[7]=$):$=e[7];const he=$;let I;e[8]!==i||e[9]!==a.id?(I=()=>{i&&ne.post(`/proker/${i}/copy-struktur/${a.id}`,{},{onSuccess:()=>{n({type:"success",message:"Struktur berhasil disalin dari proker lain."}),U(!1),ie("")},onError:()=>{n({type:"error",message:"Gagal menyalin struktur proker."})}})},e[8]=i,e[9]=a.id,e[10]=I):I=e[10];const X=I;let H;e[11]!==a.tanggal_mulai||e[12]!==a.tanggal_selesai?(H=a.tanggal_mulai||a.tanggal_selesai?[a.tanggal_mulai,a.tanggal_selesai].filter(Boolean).join(" - "):"-",e[11]=a.tanggal_mulai,e[12]=a.tanggal_selesai,e[13]=H):H=e[13];const Y=H;let d;e[14]!==a?(d=Ae(a),e[14]=a,e[15]=d):d=e[15];const Z=`Detail Proker - ${a.nama_lengkap}`;let o;e[16]!==Z?(o=s.jsx(fe,{title:Z}),e[16]=Z,e[17]=o):o=e[17];let c;e[18]!==D?(c=D&&s.jsx("div",{className:"mb-4 rounded-md border px-4 py-3 text-sm shadow-sm md:max-w-md",children:s.jsx("div",{className:D.type==="success"?"text-green-800":"text-red-800",children:D.message})}),e[18]=D,e[19]=c):c=e[19];let m;e[20]!==a.nama_lengkap?(m=s.jsx("h1",{className:"text-lg font-semibold",children:a.nama_lengkap}),e[20]=a.nama_lengkap,e[21]=m):m=e[21];const ee=a.main_proker?.nama_proker||"-";let x;e[22]!==a.tahun||e[23]!==ee?(x=s.jsxs("p",{className:"text-sm text-muted-foreground",children:[ee," â€¢ Tahun ",a.tahun]}),e[22]=a.tahun,e[23]=ee,e[24]=x):x=e[24];let p;e[25]!==m||e[26]!==x?(p=s.jsxs("div",{children:[m,x]}),e[25]=m,e[26]=x,e[27]=p):p=e[27];const se=Pe[a.status]??"secondary",ae=Ce[a.status]??a.status;let u;e[28]!==se||e[29]!==ae?(u=s.jsx(be,{variant:se,children:ae}),e[28]=se,e[29]=ae,e[30]=u):u=e[30];const te=a.ketua_pelaksana?.nama_lengkap||a.ketua_pelaksana?.user?.name||"Belum ditentukan";let h;e[31]!==te?(h=s.jsxs("span",{className:"text-muted-foreground",children:["Ketua pelaksana:"," ",s.jsx("span",{className:"font-medium",children:te})]}),e[31]=te,e[32]=h):h=e[32];const re=`/proker/${a.id}/edit`;let g;e[33]!==re?(g=s.jsx(ke,{href:re,className:"text-xs font-medium text-primary hover:underline",children:"Edit Proker"}),e[33]=re,e[34]=g):g=e[34];let j;e[35]!==u||e[36]!==h||e[37]!==g?(j=s.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[u,h,g]}),e[35]=u,e[36]=h,e[37]=g,e[38]=j):j=e[38];let f;e[39]!==p||e[40]!==j?(f=s.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[p,j]}),e[39]=p,e[40]=j,e[41]=f):f=e[41];let z;e[42]===Symbol.for("react.memo_cache_sentinel")?(z=["detail","struktur","rapat","timeline"],e[42]=z):z=e[42];let k;e[43]!==l?(k=s.jsx("div",{className:"flex flex-wrap gap-2 border-b pb-2 text-xs",children:z.map(t=>s.jsxs(T,{type:"button",size:"sm",variant:l===t?"default":"ghost",onClick:()=>ue(t),children:[t==="detail"&&"Detail Proker",t==="struktur"&&"Struktur Kepengurusan",t==="rapat"&&"Rapat Terkait",t==="timeline"&&"Timeline & Rekap"]},t))}),e[43]=l,e[44]=k):k=e[44];let b;e[45]!==a.deskripsi||e[46]!==a.main_proker?.nama_proker||e[47]!==a.nama_lengkap||e[48]!==a.tahun||e[49]!==l||e[50]!==Y?(b=l==="detail"&&s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-muted-foreground",children:"Nama Proker"}),s.jsx("div",{className:"font-medium",children:a.nama_lengkap})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-muted-foreground",children:"Main Proker"}),s.jsx("div",{children:a.main_proker?.nama_proker||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-muted-foreground",children:"Tahun"}),s.jsx("div",{children:a.tahun})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-muted-foreground",children:"Tanggal"}),s.jsx("div",{children:Y})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-muted-foreground",children:"Deskripsi"}),s.jsx("div",{children:a.deskripsi||"-"})]})]}),e[45]=a.deskripsi,e[46]=a.main_proker?.nama_proker,e[47]=a.nama_lengkap,e[48]=a.tahun,e[49]=l,e[50]=Y,e[51]=b):b=e[51];let v;e[52]!==G||e[53]!==O||e[54]!==i||e[55]!==w||e[56]!==P||e[57]!==W||e[58]!==X||e[59]!==J||e[60]!==q||e[61]!==C||e[62]!==L||e[63]!==l?(v=l==="struktur"&&s.jsxs("div",{className:"space-y-6 text-sm",children:[s.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold",children:"Struktur Kepengurusan"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Atur anggota yang terlibat dalam kepengurusan proker."})]}),s.jsxs(ve,{open:O,onOpenChange:U,children:[s.jsx(Ne,{asChild:!0,children:s.jsx(T,{type:"button",variant:"outline",size:"sm",children:"Copy dari Proker Lain"})}),s.jsxs(ye,{children:[s.jsx(_e,{children:s.jsx(Se,{children:"Salin Struktur dari Proker Lain"})}),s.jsxs("div",{className:"space-y-3 text-xs",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(V,{children:"Pilih Proker Sumber"}),s.jsxs(oe,{value:i,onValueChange:ie,children:[s.jsx(ce,{children:s.jsx(me,{placeholder:"Pilih proker"})}),s.jsx(xe,{children:J.map(Re)})]})]}),s.jsx("p",{className:"text-muted-foreground",children:"Hanya jabatan dan divisi proker yang akan disalin. Anggota tidak ikut disalin."})]}),s.jsxs(Te,{className:"pt-3",children:[s.jsx(T,{type:"button",variant:"secondary",onClick:()=>U(!1),children:"Batal"}),s.jsx(T,{type:"button",disabled:!i,onClick:X,children:"Salin Struktur"})]})]})]})]}),s.jsx("div",{className:"overflow-x-auto rounded-lg border bg-background",children:s.jsxs("table",{className:"w-full min-w-[720px] text-left text-xs",children:[s.jsx("thead",{className:"border-b bg-muted/40 text-[11px] uppercase text-muted-foreground",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2",children:"Anggota"}),s.jsx("th",{className:"px-3 py-2",children:"Jabatan"}),s.jsx("th",{className:"px-3 py-2",children:"Divisi Proker"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Aksi"})]})}),s.jsxs("tbody",{children:[L.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-3 py-4 text-center text-xs text-muted-foreground",children:"Belum ada struktur kepengurusan."})}),L.map(t=>s.jsxs("tr",{className:"border-b last:border-0 hover:bg-muted/40",children:[s.jsx("td",{className:"px-3 py-2",children:t.anggota?t.anggota.nama_lengkap||t.anggota.user?.name:"-"}),s.jsx("td",{className:"px-3 py-2",children:t.jabatan}),s.jsx("td",{className:"px-3 py-2",children:t.divisi_proker||"-"}),s.jsx("td",{className:"px-3 py-2 text-right",children:s.jsx(T,{type:"button",size:"sm",variant:"ghost",className:"text-red-600",onClick:()=>he(t),children:"Hapus"})})]},t.id))]})]})}),s.jsxs("div",{className:"rounded-md border bg-muted/40 p-3 text-xs",children:[s.jsx("div",{className:"mb-2 font-semibold",children:"Tambah Anggota ke Struktur"}),s.jsxs("form",{onSubmit:W,className:"grid gap-3 md:grid-cols-[2fr_2fr_2fr_auto]",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(V,{children:"Anggota"}),s.jsxs(oe,{value:w.anggota_id,onValueChange:t=>C("anggota_id",t),children:[s.jsx(ce,{children:s.jsx(me,{placeholder:"Pilih anggota"})}),s.jsx(xe,{children:G.map(Le)})]}),s.jsx(le,{message:P.anggota_id})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(V,{children:"Jabatan"}),s.jsx(de,{value:w.jabatan,onChange:t=>C("jabatan",t.target.value)}),s.jsx(le,{message:P.jabatan})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(V,{children:"Divisi Proker"}),s.jsx(de,{value:w.divisi_proker,onChange:t=>C("divisi_proker",t.target.value)}),s.jsx(le,{message:P.divisi_proker})]}),s.jsx("div",{className:"flex items-end",children:s.jsx(T,{type:"submit",size:"sm",disabled:q,children:"Tambah"})})]})]})]}),e[52]=G,e[53]=O,e[54]=i,e[55]=w,e[56]=P,e[57]=W,e[58]=X,e[59]=J,e[60]=q,e[61]=C,e[62]=L,e[63]=l,e[64]=v):v=e[64];let N;e[65]!==a.rapats||e[66]!==l?(N=l==="rapat"&&s.jsxs("div",{className:"space-y-3 text-xs",children:[s.jsx("h2",{className:"text-sm font-semibold",children:"Rapat Terkait"}),s.jsx("p",{className:"text-muted-foreground",children:"Daftar rapat yang terhubung dengan proker ini."}),s.jsx("div",{className:"overflow-x-auto rounded-lg border bg-background",children:s.jsxs("table",{className:"w-full min-w-[640px] text-left text-xs",children:[s.jsx("thead",{className:"border-b bg-muted/40 text-[11px] uppercase text-muted-foreground",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2",children:"Judul"}),s.jsx("th",{className:"px-3 py-2",children:"Tanggal"}),s.jsx("th",{className:"px-3 py-2",children:"Keterangan"})]})}),s.jsxs("tbody",{children:[(a.rapats??[]).length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-3 py-4 text-center text-xs text-muted-foreground",children:"Belum ada rapat yang terhubung dengan proker ini."})}),(a.rapats??[]).map(Ee)]})]})})]}),e[65]=a.rapats,e[66]=l,e[67]=N):N=e[67];let y;e[68]!==a||e[69]!==l||e[70]!==A?(y=l==="timeline"&&s.jsxs("div",{className:"space-y-6 text-xs",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold",children:"Timeline Proker"}),s.jsxs("ol",{className:"mt-3 space-y-2 border-l pl-3",children:[A.length===0&&s.jsx("li",{className:"text-muted-foreground",children:"Belum ada aktivitas pada timeline."}),A.map(Be)]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"mb-2 text-sm font-semibold",children:"Rekap"}),s.jsx(we,{proker:a})]})]}),e[68]=a,e[69]=l,e[70]=A,e[71]=y):y=e[71];let _;e[72]!==f||e[73]!==k||e[74]!==b||e[75]!==v||e[76]!==N||e[77]!==y?(_=s.jsxs("div",{className:"mx-auto max-w-5xl space-y-6 rounded-lg border bg-background p-4 md:p-6",children:[f,k,b,v,N,y]}),e[72]=f,e[73]=k,e[74]=b,e[75]=v,e[76]=N,e[77]=y,e[78]=_):_=e[78];let S;e[79]!==c||e[80]!==_?(S=s.jsxs("div",{className:"p-4",children:[c,_]}),e[79]=c,e[80]=_,e[81]=S):S=e[81];let F;return e[82]!==S||e[83]!==d||e[84]!==o?(F=s.jsxs(De,{breadcrumbs:d,children:[o,S]}),e[82]=S,e[83]=d,e[84]=o,e[85]=F):F=e[85],F}function Be(r){return s.jsx("li",{children:s.jsxs("div",{className:"relative mb-1",children:[s.jsx("span",{className:"absolute -left-3 top-1 h-2 w-2 rounded-full bg-primary"}),s.jsx("div",{className:"text-[11px] text-muted-foreground",children:r.tanggal}),s.jsx("div",{className:"text-sm font-medium",children:r.judul})]})},`${r.type}-${r.id}`)}function Ee(r){return s.jsxs("tr",{className:"border-b last:border-0 hover:bg-muted/40",children:[s.jsx("td",{className:"px-3 py-2",children:s.jsx("div",{className:"max-w-[260px] truncate",children:r.judul})}),s.jsx("td",{className:"px-3 py-2 text-[11px] text-muted-foreground",children:r.tanggal}),s.jsx("td",{className:"px-3 py-2 text-[11px] text-muted-foreground",children:"Terhubung sebagai rapat proker."})]},r.id)}function Le(r){return s.jsx(pe,{value:String(r.id),children:r.nama_lengkap||r.user?.name||"-"},r.id)}function Re(r){return s.jsxs(pe,{value:String(r.id),children:[r.nama_lengkap," (",r.tahun,")"]},r.id)}export{as as default};
